<% content_for :title, "Events" %>

<section class="events-page">
  <div class="tag-nav">
    <span class="tag-nav__label">Tags:</span>
    <% Event::TAGS.sort.each do |tag| %>
      <div class="tag-link <%= 'selected' if params[:tag] == tag %>">
        <%= link_to tag, events_path(tag: tag) %>
      </div>
    <% end %>
    <div class="tag-link <%= 'selected' unless params[:tag].present? %>">
      <%= link_to "all", events_path %>
    </div>
  </div>

  <p class="calendar-mobile-hint">Monthly calendar view is available on tablets and desktops.</p>

  <div class="events-layout">
    <aside class="events-calendar" aria-label="Monthly calendar view for events">
      <h2 class="events-section-title">Calendar View</h2>
      <%= month_calendar(events: @events) do |date, events| %>
        <div class="calendar-date">
          <% if date.month != Date.today.month %>
            <%= date.strftime("%b %-d") %>
          <% else %>
            <%= date.day %>
          <% end %>
        </div>
        <% events.each do |event| %>
          <div class="calendar-event">
            <%= link_to event.title, event %>
          </div>
        <% end %>
      <% end %>
    </aside>

    <div class="events-list">
      <% upcoming_events = @events.upcoming %>
      <% if upcoming_events.any? %>
        <h2 class="events-section-title">Upcoming Events</h2>
        <div class="events-table-wrapper">
          <%= render "table", events: upcoming_events, approve: false %>
        </div>
      <% else %>
        <p class="events-empty">No upcoming events found for this filter. Check back soon or try a different tag.</p>
      <% end %>
    </div>
  </div>
</section>
